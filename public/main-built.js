/**
 * @license RequireJS text 2.0.13 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.13",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="ï»¿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!templates/NavTemplate.html",[],function(){return'<nav class="navbar nav-home navbar-default navbar-static-top" role="navigation">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".bs-example-navbar-collapse-1">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#">Gradients</a>\n        </div>\n        <div class="collapse navbar-collapse bs-example-navbar-collapse-1">\n            <ul class="nav navbar-nav navbar-right nav-list">\n                <li><a href="#/signUp">SIGN UP</a></li>\n                <li><a href="#">LOGIN</a></li>\n            </ul>\n        </div>\n    </div>\n</nav>'}),define("views/NavView",["jquery","underscore","backbone","text!templates/NavTemplate.html"],function(e,t,n,r){var i=n.View.extend({render:function(){var e=t.template(r);this.$el.html(e)}});return i}),define("text!templates/LoginTemplate.html",[],function(){return'<div class="fluid-container blue centre">\n    <div class="container blue">\n\n        <h1 class="page-title">Simple grade visualisation for students.</h1>\n\n        <h2>Create an account in seconds and begin tracking your results.</h2>\n\n        <form class="form-inline login-form" role="form">\n            <div class="form-group form-group-lg login-username-div">\n                <label class="sr-only" for="exampleInputUsername2">Username</label>\n                <input type="text" class="form-control input-lg" id="exampleInputUsername2" placeholder="Enter username" name="username">\n            </div>\n            <div class="form-group form-group-lg login-password-div">\n                <label class="sr-only" for="exampleInputPassword2">Password</label>\n                <input type="password" class="form-control input-lg" id="exampleInputPassword2" placeholder="Password" name="password">\n            </div>\n            <button type="submit" class="btn btn-primary btn-lg login">Login</button>\n        </form>\n        <div class="warning-div">&nbsp</div>\n    </div>\n</div>\n<div class="fluid-container centre">\n    <div class="container top-space">\n        <div class="row">\n            <div class="col-sm-4">\n                <h1><span class="fa fa-save fa-large"></span></h1>\n                <h3>Store your grades.</h3>\n            </div>\n            <div class="col-sm-4">\n                <h1><span class="fa fa-area-chart fa-large"></span></h1>\n                <h3>Track your progress.</h3>\n            </div>\n            <div class="col-sm-4">\n                <h1><span class="fa fa-pie-chart fa-large"></span></h1>\n                <h3>Visualise your success.</h3>\n            </div>\n        </div>\n    </div>\n</div>'}),define("libs/Labels",["jquery"],function(e){var t=e("<label>").addClass("feedback-label");return{emptyFields:t.clone().text("All fields must be filled out."),invalidUsernamePassword:t.clone().text("Invalid username/password."),usernameTooShort:t.clone().text("Username must be 15 characters or less."),passwordsNotMatching:t.clone().text("Both passwords must match."),usernameExists:t.clone().text("Username already exists."),scoreNotNumber:t.clone().text("Score must be a number."),scoreNotNatural:t.clone().text("Score must be a natural number."),scoreNotPositive:t.clone().text("Score must be positive"),gradeSuccess:t.clone().text("Successfully added grade."),gradeExists:t.clone().text("User already has this assignment."),userModuleExists:t.clone().text("User already has this module."),userModuleSuccess:t.clone().text("Successfully added module."),assignmentExists:t.clone().text("Assignment already exists."),assignmentSuccess:t.clone().text("Successfully created assignment."),moduleExists:t.clone().text("Module already exists."),moduleSuccess:t.clone().text("Successfully created module."),saveFailed:t.clone().text("Save failed.")}}),define("libs/Utils",["jquery","underscore"],function(e,t){return{goodForm:function(e){var n=t.filter(e,function(e){return e.trim().length===0});return n.length===0},getCookie:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1);if(i.indexOf(t)!=-1)return i.substring(t.length,i.length)}return""},formToObject:function(t){var n={},r=t.serializeArray();return e.each(r,function(){n[this.name]!==undefined?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n}}}),define("views/LoginView",["jquery","underscore","backbone","text!templates/LoginTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.router=e.router},render:function(){var e=t.template(r);this.$el.html(e)},events:{"submit .login-form":"login"},login:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(o){var u={success:t.bind(function(t){e(n.currentTarget).trigger("reset");var r=t.attributes.auth.token,i=t.attributes.auth.user.id,s=t.attributes.auth.user.username,o=t.attributes.auth.user.admin;document.cookie="user_id="+i+";",document.cookie="auth_token="+r+";",document.cookie="username="+s+";",document.cookie="admin="+o+";",e(".warning-div").empty().append("&nbsp"),this.router.navigate("#/"+s,{trigger:!0})},this),error:t.bind(function(t){e(".warning-div").append(i.invalidUsernamePassword)},this)};this.collection.create(r,u)}else e(".warning-div").append(i.emptyFields)}});return o}),define("text!templates/FooterTemplate.html",[],function(){return'<div class="container-fluid footer-container">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre">\n\n                <% var d = new Date().getFullYear(); %>\n\n                <footer>&copy; Will Sutherland <%= d %> </footer>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/FooterView",["jquery","underscore","backbone","text!templates/FooterTemplate.html"],function(e,t,n,r){var i=n.View.extend({render:function(){var e=t.template(r);this.$el.html(e)}});return i}),define("views/HomePage",["jquery","underscore","backbone","views/NavView","views/LoginView","views/FooterView"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.router=e.router,this.navView=new r,this.loginView=new i({router:this.router,collection:this.collection}),this.footerView=new s},render:function(){this.$el.empty(),this.navView.render(),this.loginView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.loginView.$el),this.$el.append(this.footerView.$el)}});return o}),define("text!templates/ProfileNavTemplate.html",[],function(){return'<nav class="navbar nav-home navbar-default navbar-static-top" role="navigation">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".bs-example-navbar-collapse-1">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#">Gradients</a>\n        </div>\n        <div class="collapse navbar-collapse bs-example-navbar-collapse-1">\n            <ul class="nav navbar-nav navbar-right nav-list">\n\n                <% if(admin) { %>\n                    <li class="admin"><a href="#/<%= username %>/admin">ADMIN</a></li>\n                <% } %>\n\n                <li class="logout"><a href="#">LOGOUT</a></li>\n            </ul>\n        </div>\n    </div>\n</nav>'}),define("views/ProfileNavView",["jquery","underscore","backbone","text!templates/ProfileNavTemplate.html","libs/Utils"],function(e,t,n,r,i){var s=n.View.extend({initialize:function(){this.username=i.getCookie("username"),i.getCookie("admin")&&(this.admin=JSON.parse(i.getCookie("admin")))},render:function(){var e=t.template(r,{username:this.username,admin:this.admin});this.$el.html(e)},events:{"click .logout":"logout"},logout:function(e){document.cookie="user_id=",document.cookie="auth_token=",document.cookie="username=",document.cookie="admin="}});return s}),define("text!templates/UserInfoTemplate.html",[],function(){return'<div class="container">\n    <div class="row">\n        <div class="col-md-12">\n            <h1 class="profile-title">\n                <%= user.get(\'username\') %>\n            </h1>\n            <h3 class="profile-subtitle">\n                <%= user.get(\'institution_name\') %> - <%= user.get(\'course_name\') %>\n            </h3>\n\n            <hr>\n\n            <div class="row tile-row">\n\n                <% averages.each(function(average) { %>\n\n                        <div class="col-xs-6 col-sm-4 col-md-3 tile-wrapper">\n                            <div class="year-average-tile">\n                                <h2>\n                                    <%= average.get(\'average\') %>%\n                                </h2>\n                                <h4>\n                                    <%= average.get(\'year\').slice(-2) %>/<%= ("" + (parseInt(average.get(\'year\')) + 1)).slice(-2) %>\n                                </h4>\n                            </div>\n                        </div>\n\n                <% }); %>\n\n            </div>\n\n        </div>\n    </div>\n</div>\n'}),define("views/UserInfoView",["jquery","underscore","backbone","text!templates/UserInfoTemplate.html"],function(e,t,n,r){var i=n.View.extend({initialize:function(e){this.userModel=e.userModel,this.yearAverageCollection=e.yearAverageCollection,this.listenTo(this.userModel,"add remove change",this.render),this.listenTo(this.yearAverageCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{user:this.userModel,averages:this.yearAverageCollection});this.$el.html(e)}});return i}),define("models/UserModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/users"})}),define("models/UserModuleModel",["underscore","backbone"],function(e,t){return t.Model.extend({initialize:function(e){},urlRoot:"/gradient/v1/userModules/"})}),define("collections/UserModulesCollection",["underscore","backbone","models/UserModuleModel","libs/Utils"],function(e,t,n,r){return t.Collection.extend({initialize:function(e,t){},url:function(){return"/gradient/v1/userModules/"+r.getCookie("user_id")},model:n})}),define("text!templates/ModuleTemplate.html",[],function(){return'<div class="container">\n    <hr>\n\n    <div class="row tile-row">\n\n        <% modules.each(function(module) { %>\n\n            <div class="col-xs-6 col-sm-4 col-md-3 tile-wrapper">\n\n                <% var value = "" +  module.get(\'id\') + "x" + module.get(\'user_id\') + "x" + module.get(\'year\') + "x" + module.get(\'credits\') %>\n\n                <div id="<%= module.get(\'id\') %>" class="module-tile show-grade" data-value=<%= value %>>\n                    <h3>\n                        <%= module.get(\'module_name\') %>\n                    </h3>\n                    <h4>\n                        <%= module.get(\'module_code\')%>\n                        <small>\n                            <% var thisYear = "" + module.get(\'year\') %>\n                            <% var nextYear = "" + (module.get(\'year\') + 1) %>\n                            (<%= thisYear.slice(-2) %>/<%= nextYear.slice(-2) %>)\n                        </small>\n                    </h4>\n\n                    <button type="button" class="btn btn-link delete-user-module" value=<%= module.get(\'id\') %> >\n                        <span class="fa fa-remove"></span>\n                    </button>\n                </div>\n            </div>\n\n        <% }); %>\n\n        <div class="col-xs-6 col-sm-4 col-md-3 tile-wrapper">\n\n            <% var moduleLink = "#/" + username + "/addModule" %>\n            <a href=<%= moduleLink %>>\n\n            <div class="module-tile">\n                <h1 class="text-center">\n                    <button type="button" class="btn btn-link add-module">\n                        <span class="fa fa-plus module-button"></span>\n                    </button>\n                </h1>\n            </div>\n            </a>\n        </div>\n    </div>\n</div>\n'}),define("models/GradeAverageModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/gradeAverage"})}),define("text!templates/GradesTemplate.html",[],function(){return'<div class="container grade-list">\n    <hr>\n\n    <% var moduleCode;%>\n    <% grades.each(function(grade) { %>\n        <% moduleCode = grade.get(\'module_code\') %>\n    <% }); %>\n\n    <h2>\n    <% if (moduleCode) { %>\n        <%= moduleCode %> - <%= moduleAverage.get(\'average\') %>%\n        <small>\n            (<%= credits %> credits)\n        </small>\n    <% } else { %>\n        No grades stored.\n    <% }  %>\n    </h2>\n\n    <hr>\n\n    <div class="row tile-row">\n\n        <% grades.each(function(grade) { %>\n\n            <% var colour = "grade-tile"; %>\n            <% if(grade.get(\'semester\') == 1) { %>\n                <% colour += " semester-one" %>\n            <% } else {%>\n                <% colour += " semester-two" %>\n            <% } %>\n\n            <div class="col-xs-6 col-sm-4 col-md-3 tile-wrapper">\n                <a href="#/<%= username %>/editGrade/<%= grade.get(\'id\') %>/<%= grade.get(\'module_id\') %>" class="no-underline">\n                <div class= "<%= colour %>" >\n                    <h3>\n                        <%= grade.get(\'assignment_name\') %>\n                    </h3>\n                    <h4>\n                        <%= grade.get(\'percentage\') %>%\n\n                        <small>(<%= grade.get(\'weight\') %>)</small>\n                    </h4>\n                </div>\n                </a>\n            </div>\n\n        <% }); %>\n\n        <div class="col-xs-6 col-sm-4 col-md-3 tile-wrapper">\n\n            <% var moduleLink = "#/" + username + "/addGrade/" + module_id + "/" + year %>\n            <a href=<%= moduleLink %>>\n                <div class="grade-tile semester-one">\n                    <h1 class="text-center">\n                        <button type="button" class="btn btn-link add-grade">\n                            <span class="fa fa-plus grade-button"></span>\n                        </button>\n                    </h1>\n                </div>\n            </a>\n        </div>\n\n    </div>\n</div>\n'}),define("views/GradesView",["jquery","underscore","backbone","text!templates/GradesTemplate.html"],function(e,t,n,r){var i=n.View.extend({initialize:function(e){this.gradesCollection=e.gradesCollection,this.gradeAverageModel=e.gradeAverageModel,this.username=e.username,this.module_id=e.module_id,this.year=e.year,this.credits=e.credits,this.listenTo(this.gradesCollection,"add remove change",this.render),this.listenTo(this.gradeAverageModel,"add remove change",this.render)},render:function(){var e=t.template(r,{grades:this.gradesCollection,moduleAverage:this.gradeAverageModel,username:this.username,module_id:this.module_id,year:this.year,credits:this.credits});this.$el.html(e)}});return i}),define("views/ModuleView",["jquery","underscore","backbone","text!templates/ModuleTemplate.html","models/GradeAverageModel","views/GradesView"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.userModulesCollection=e.userModulesCollection,this.gradesCollection=e.gradesCollection,this.router=e.router,this.username=e.username,this.userId=e.userId,this.listenTo(this.userModulesCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{modules:this.userModulesCollection,username:this.username});this.$el.html(e)},events:{"click .show-grade":"showGrades","click .delete-user-module":"deleteUserModule"},showGrades:function(t){var n=t.currentTarget.attributes["data-value"].value.split("x"),r=n[0]+"x"+n[1],o=n[0],u=n[2],a=n[3];this.render(),e("#"+o).css("background-color","#5995E8"),e("#"+o+" .delete-user-module").css("display","block"),this.gradeAverageModel=new i({id:r}),this.gradeAverageModel.fetch(),this.gradesCollection.fetch({data:r}),this.gradesView=new s({gradesCollection:this.gradesCollection,gradeAverageModel:this.gradeAverageModel,username:this.username,module_id:o,year:u,credits:a}),this.gradesView.render(),this.$el.append(this.gradesView.$el)},deleteUserModule:function(e){var n=e.currentTarget.attributes.value.value;this.model=this.userModulesCollection.get(n),this.model.destroy({data:{user_id:this.userId},processData:!0,success:t.bind(function(){},this)})}});return o}),define("models/GradeModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/grade"})}),define("collections/GradesCollection",["underscore","backbone","models/GradeModel"],function(e,t,n){return t.Collection.extend({initialize:function(e,t){},url:function(){return"/gradient/v1/grades"},model:n})}),define("views/ProfilePage",["jquery","underscore","backbone","views/ProfileNavView","views/UserInfoView","models/UserModel","collections/UserModulesCollection","views/ModuleView","collections/GradesCollection","views/GradesView","models/GradeAverageModel","views/FooterView","libs/Utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=n.View.extend({initialize:function(e){this.router=e.router,this.router.on("route:profile",function(){var t=h.getCookie("user_id"),n=h.getCookie("username");this.gradesCollection=e.gradesCollection,this.yearAverageCollection=e.yearAverageCollection,this.yearAverageCollection.fetch({data:t}),this.navView=new r,this.userModel=new s({id:t}),this.userModel.fetch(),this.footerView=new c,this.userModulesCollection=e.userModulesCollection,this.userModulesCollection.fetch(),this.userInfoView=new i({userModel:this.userModel,yearAverageCollection:this.yearAverageCollection}),this.listenTo(this.userModel,"change",this.render),this.moduleView=new u({userModulesCollection:this.userModulesCollection,gradesCollection:this.gradesCollection,router:this.router,username:n,userId:t}),this.userInfoView.render(),this.moduleView.render()},this)},render:function(){this.$el.children().detach(),this.navView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.userInfoView.$el),this.$el.append(this.moduleView.$el),this.$el.append(this.footerView.$el)}});return p}),define("collections/UserCollection",["underscore","backbone","models/UserModel"],function(e,t,n){return t.Collection.extend({url:"/gradient/v1/users",model:n})}),define("text!templates/SignupTemplate.html",[],function(){return'<div class="container-fluid">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre form-view">\n\n                <h1 class="page-title">Create your gradients account here.</h1>\n\n                    <div class="warning-div">&nbsp</div>\n                    <form class="signup-form" role="form">\n                        <div class="form-group form-group-lg signup-username-div">\n                            <label class="sr-only" for="exampleInputUsername2">Username</label>\n                            <input type="text" class="form-control" id="exampleInputUsername2" placeholder="username" name="username">\n                        </div>\n                        <div class="form-group form-group-lg">\n                            <label class="sr-only" for="exampleInputEmail2">Email Address</label>\n                            <input type="email" class="form-control" id="exampleInputEmail2" placeholder="email address" name="email">\n                        </div>\n                        <div class="form-group form-group-lg">\n                            <label class="sr-only" for="exampleInputPassword2">Password</label>\n                            <input type="password" class="form-control" id="exampleInputPassword2" placeholder="password" name="password">\n                        </div>\n                        <div class="form-group form-group-lg">\n                            <label class="sr-only" for="exampleInputSecondPassword2">Repeat Password</label>\n                            <input type="password" class="form-control" id="exampleInputSecondPassword2" placeholder="repeat password" name="repeatPassword">\n                        </div>\n                        <div class="form-group form-group-lg">\n                            <select class="form-control" id="signup-form-unichoice" name="uni_choice">\n                                <option value="" selected>Choose a uni</option>\n                                <% institutions.each(function(uni) { %>\n                                <option value=<%= uni.get(\'id\') %>><%= uni.get(\'institution_name\') %></option>\n                                <% }); %>\n                            </select>\n                        </div>\n                        <div class="form-group form-group-lg">\n                            <select class="form-control" id="signup-form-coursechoice" name="course_choice">\n                                <option value="" selected>Choose a course</option>\n                                <% courses.each(function(course) { %>\n                                <option value=<%= course.get(\'id\') %>><%= course.get(\'course_name\') %></option>\n                                <% }); %>\n                            </select>\n                        </div>\n                        <div class="form-group form-group-lg">\n                            <select class="form-control" id="signup-form-yearchoice" name="year">\n                                <option value="" selected>What year are you?</option>\n\n                                <% for(var i=1; i<9; i++) { %>\n                                    <option> <%= i %></option>\n                                <% } %>\n\n                            </select>\n                        </div>\n\n                        <p class="disclaimer">\n                            Gradients is a service designed to help users store their grades and see how well they are doing.\n                            It cannot be held accountable for any potential miscalculation in percentages that a user could then rely\n                            on to achieve a specific degree classification or module average.\n                        </p>\n\n                        <button type="submit" class="btn btn-primary btn-block login">Agree & Create</button>\n                    </form>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/SignUpView",["jquery","underscore","backbone","text!templates/SignupTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.router=e.router,this.userCollection=e.userCollection,this.institutionsCollection=e.institutionsCollection,this.courseCollection=e.courseCollection,this.listenTo(this.institutionsCollection,"add remove change",this.render),this.listenTo(this.courseCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{institutions:this.institutionsCollection,courses:this.courseCollection});this.$el.html(e)},events:{"submit .signup-form":"signup"},signup:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(r.username.length>15)e(".warning-div").prepend(i.usernameTooShort);else if(r.password!=r.repeatPassword)e(".warning-div").prepend(i.passwordsNotMatching);else if(o){var u={success:t.bind(function(t){e(".warning-div").empty().append("&nbsp"),this.router.navigate("#",{trigger:!0})},this),error:t.bind(function(){e(".warning-div").append(i.usernameExists)},this)};this.userCollection.create(r,u)}else e(".warning-div").prepend(i.emptyFields)}});return o}),define("views/SignUpPage",["jquery","underscore","backbone","views/NavView","views/SignUpView","views/FooterView"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.userCollection=e.userCollection,this.institutionsCollection=e.institutionsCollection,this.courseCollection=e.courseCollection,this.institutionsCollection.fetch(),this.courseCollection.fetch(),this.router=e.router,this.navView=new r,this.signUpView=new i({router:this.router,userCollection:this.userCollection,institutionsCollection:this.institutionsCollection,courseCollection:this.courseCollection}),this.footerView=new s},render:function(){this.$el.empty(),this.navView.render(),this.signUpView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.signUpView.$el),this.$el.append(this.footerView.$el)}});return o}),define("models/LoginModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/login"})}),define("collections/LoginCollection",["underscore","backbone","models/LoginModel"],function(e,t,n){return t.Collection.extend({url:"/gradient/v1/login",model:n})}),define("text!templates/AddUserModuleTemplate.html",[],function(){return'<div class="container-fluid">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre form-view">\n\n                <h1 class="page-title">\n                    <button type="button" class="btn btn-default cancel">\n                        <span class="fa fa-arrow-left"></span>\n                    </button>\n                    What module do you do?\n                </h1>\n\n                <div class="warning-div">&nbsp</div>\n\n                <form role="form" class="add-user-module-form">\n                    <div class="form-group">\n                        <select class="form-control" id="add-user-module-form-moduleChoice" name="module_choice">\n                            <option value="" selected>Choose a module</option>\n                            <% modules.each(function(module) { %>\n                            <% var display = "" + module.get(\'module_code\') + " - " + module.get(\'module_name\') %>\n                            <option value=<%= module.get(\'id\') %>><%= display %></option>\n                            <% }); %>\n                        </select>\n                    </div>\n                    <div class="form-group form-group-lg">\n                        <select class="form-control" id="exampleInputYear" name="year">\n                            <option value="" selected>When did you do the module?</option>\n\n                            <% for(var i=2013; i <= new Date().getFullYear(); i++) { %>\n\n                                <option value="<%= i %>"><%= i %> / <%= i+1 %></option>\n\n                            <% } %>\n\n                        </select>\n                    </div>\n                    <div class="checkbox">\n                        <label>\n                            <input type="checkbox" name="current"> Current?\n                        </label>\n                    </div>\n                    <input type="hidden" name="user_id" value=<%= user_id %>>\n                    <button type="submit" class="btn btn-info btn-block">\n                        <span class="fa fa-check"></span> Add\n                    </button>\n                </form>\n\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/AddUserModuleView",["jquery","underscore","backbone","text!templates/AddUserModuleTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.user_id=e.user_id,this.router=e.router,this.moduleCollection=e.moduleCollection,this.userModulesCollection=e.userModulesCollection,this.listenTo(this.userModulesCollection,"add remove change",this.render),this.listenTo(this.moduleCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{modules:this.moduleCollection,user_id:this.user_id});this.$el.html(e)},events:{"submit .add-user-module-form":"addUserModule","click .cancel":"cancel"},addUserModule:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(o){var u={success:t.bind(function(t){e(".warning-div").prepend(i.userModuleSuccess)},this),error:t.bind(function(){e(".warning-div").prepend(i.userModuleExists)},this)};this.userModulesCollection.create(r,u)}else e(".warning-div").prepend(i.emptyFields)},cancel:function(t){e(".warning-div").empty().append("&nbsp");var n=s.getCookie("username"),r="#/"+n;this.router.navigate(r,{trigger:!0})}});return o}),define("views/AddModulePage",["jquery","underscore","backbone","views/ProfileNavView","views/AddUserModuleView","collections/UserModulesCollection","views/FooterView","models/UserModel","libs/Utils"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({initialize:function(e){this.router=e.router,this.router.on("route:addModule",function(t){var n=a.getCookie("user_id");this.navView=new r,this.moduleCollection=e.moduleCollection,this.moduleCollection.fetch(),this.userModulesCollection=e.userModulesCollection,this.addUserModuleView=new i({user_id:n,moduleCollection:this.moduleCollection,userModulesCollection:this.userModulesCollection,router:this.router}),this.footerView=new o},this)},render:function(){this.$el.empty(),this.navView.render(),this.addUserModuleView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.addUserModuleView.$el),this.$el.append(this.footerView.$el)}});return f}),define("models/ModuleModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/modules"})}),define("collections/ModuleCollection",["underscore","backbone","models/ModuleModel"],function(e,t,n){return t.Collection.extend({url:"/gradient/v1/modules",model:n})}),define("models/InstitutionModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/institutions"})}),define("collections/InstitutionsCollection",["underscore","backbone","models/InstitutionModel"],function(e,t,n){return t.Collection.extend({url:"/gradient/v1/institutions",model:n})}),define("models/CourseModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/courses"})}),define("collections/CourseCollection",["underscore","backbone","models/CourseModel"],function(e,t,n){return t.Collection.extend({url:"/gradient/v1/courses",model:n})}),define("text!templates/AddGradeTemplate.html",[],function(){return'<div class="container-fluid">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre form-view">\n\n                <h1 class="page-title">\n                    <button type="button" class="btn btn-default cancel">\n                        <span class="fa fa-arrow-left"></span>\n                    </button>\n                    What score did you get?\n                </h1>\n\n                <div class="warning-div">&nbsp</div>\n\n                <form role="form" class="add-grade-form">\n                    <div class="form-group">\n                        <select class="form-control" id="add-grade-form-assignment-choice" name="assignment_choice">\n                            <option value="" selected>Choose an assignment</option>\n                            <% assignments.each(function(assignment) { %>\n                            <% var display = "" + assignment.get(\'assignment_name\') + " (" + assignment.get(\'max_mark\') + ")" %>\n                            <option value=<%= assignment.get(\'id\') %>><%= display %></option>\n                            <% }); %>\n                        </select>\n                    </div>\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="exampleInputScore2">Score</label>\n                        <input type="text" class="form-control" id="exampleInputScore2" placeholder="Enter score" name="score">\n                    </div>\n                    <input type="hidden" name="user_id" value=<%= user_id %>>\n                    <input type="hidden" name="module_id" value=<%= module_id %>>\n                    <button type="submit" class="btn btn-info btn-block">\n                        <span class="fa fa-check"></span> Add\n                    </button>\n                </form>\n\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/AddGradeView",["jquery","underscore","backbone","text!templates/AddGradeTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.router=e.router,this.assignmentsCollection=e.assignmentsCollection,this.gradesCollection=e.gradesCollection,this.module_id=e.module_id,this.user_id=e.user_id,this.year=e.year,this.listenTo(this.assignmentsCollection,"add remove change",this.render),this.listenTo(this.gradesCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{assignments:this.assignmentsCollection,module_id:this.module_id,user_id:this.user_id,year:this.year});this.$el.html(e)},events:{"submit .add-grade-form":"addGrade","click .cancel":"cancel"},addGrade:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(isNaN(r.score))e(".warning-div").prepend(i.scoreNotNumber);else if(r.score<0)e(".warning-div").prepend(i.scoreNotPositive);else if(o){var u={success:t.bind(function(t){e(".warning-div").prepend(i.gradeSuccess)},this),error:t.bind(function(){e(".warning-div").prepend(i.gradeExists)},this)};this.gradesCollection.create(r,u)}else e(".warning-div").prepend(i.emptyFields)},cancel:function(t){e(".warning-div").empty().append("&nbsp");var n=s.getCookie("username"),r="#/"+n;this.router.navigate(r,{trigger:!0})}});return o}),define("views/AddGradePage",["jquery","underscore","backbone","views/ProfileNavView","views/AddGradeView","views/FooterView","models/UserModel","libs/Utils"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({initialize:function(e){this.router=e.router,this.footerView=new s,this.router.on("route:addGrade",function(t,n,s){var o=u.getCookie("user_id");this.gradesCollection=e.gradesCollection,this.assignmentsCollection=e.assignmentsCollection,this.assignmentsCollection.fetch({data:n+"x"+o+"x"+s}),this.navView=new r,this.addGradeView=new i({assignmentsCollection:this.assignmentsCollection,gradesCollection:this.gradesCollection,module_id:n,user_id:o,year:s,router:this.router})},this)},render:function(){this.$el.empty(),this.navView.render(),this.addGradeView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.addGradeView.$el),this.$el.append(this.footerView.$el)}});return a}),define("models/AssignmentModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/assignments"})}),define("collections/AssignmentsCollection",["underscore","backbone","models/AssignmentModel"],function(e,t,n){return t.Collection.extend({initialize:function(e,t){},url:function(){return"/gradient/v1/assignments"},model:n})}),define("text!templates/AdminChoiceTemplate.html",[],function(){return'<div class="container-fluid centre">\n    <div class="row">\n        <div class="col-sm-1"></div>\n        <div class="col-sm-2 col-xs-4 assignment-form-button form-button">\n            <h1>\n                <span class="fa fa-plus fa-medium"></span>\n            </h1>\n            <h4>Assignment</h4>\n        </div>\n        <div class="col-sm-2 col-xs-4 module-form-button form-button">\n            <h1>\n                <span class="fa fa-plus fa-medium"></span>\n            </h1>\n            <h4>Module</h4>\n        </div>\n        <div class="col-sm-2 col-xs-4 course-form-button form-button">\n            <h1>\n                <span class="fa fa-plus fa-medium"></span>\n            </h1>\n            <h4>Course</h4>\n        </div>\n        <div class="col-sm-2 col-xs-6 institution-form-button form-button">\n            <h1>\n                <span class="fa fa-plus fa-medium"></span>\n            </h1>\n            <h4>Institution</h4>\n        </div>\n        <div class="col-sm-2 col-xs-6 admin-form-button form-button">\n            <h1>\n                <span class="fa fa-plus fa-medium"></span>\n            </h1>\n            <h4>Assign Admin</h4>\n        </div>\n        <div class="col-sm-1"></div>\n    </div>\n</div>\n'}),define("text!templates/CreateModuleTemplate.html",[],function(){return'<div class="container-fluid">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre form-view">\n\n                <h1>Create a module:</h1>\n\n                <div class="warning-div">&nbsp</div>\n\n                <form role="form" class="create-module-form">\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="moduleName">Name</label>\n                        <input type="text" class="form-control" id="moduleName" placeholder="Enter module name" name="name">\n                    </div>\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="moduleCode">Code</label>\n                        <input type="text" class="form-control" id="moduleCode" placeholder="Enter module code" name="code">\n                    </div>\n                    <div class="form-group form-group-lg">\n                        <select class="form-control" id="moduleCredits" name="credits">\n                            <option value="" selected>Choose number of credits</option>\n                            <option>10</option>\n                            <option>20</option>\n                        </select>\n                    </div>\n                    <button type="submit" class="btn btn-block btn-info">\n                        <span class="fa fa-check"></span> Create\n                    </button>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/CreateModuleView",["jquery","underscore","backbone","text!templates/CreateModuleTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(){this.listenTo(this.collection,"add remove change",this.render)},render:function(){var e=t.template(r);this.$el.html(e)},events:{"submit .create-module-form":"createModule"},createModule:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(o){var u={success:t.bind(function(t){e(".warning-div").prepend(i.moduleSuccess)},this),error:t.bind(function(){e(".warning-div").prepend(i.moduleExists)},this)};this.collection.create(r,u)}else e(".warning-div").prepend(i.emptyFields)}});return o}),define("text!templates/CreateAssignmentTemplate.html",[],function(){return'<div class="container-fluid">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre form-view">\n\n                <h1>Create an assignment:</h1>\n\n                <div class="warning-div">&nbsp</div>\n\n                <form role="form" class="create-assignment-form">\n\n                    <div class="form-group">\n                        <select class="form-control" id="add-user-module-form-moduleChoice" name="module">\n                            <option value="" selected>Choose a module</option>\n                            <% modules.each(function(module) { %>\n                            <% var display = "" + module.get(\'module_code\') + " - " + module.get(\'module_name\') %>\n                            <option value=<%= module.get(\'id\') %>><%= display %></option>\n                            <% }); %>\n                        </select>\n                    </div>\n\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="assignmentName">Name</label>\n                        <input type="text" class="form-control" id="assignmentName" placeholder="Enter assignment name" name="name">\n                    </div>\n\n                    <div class="form-group">\n                        <select class="form-control" id="assignmentType" name="type">\n                            <option value="" selected>Choose an assignment type</option>\n                            <% assignmentTypes.each(function(type) { %>\n                                <option value=<%= type.get(\'id\') %>><%= type.get(\'assignment_type\') %></option>\n                            <% }); %>\n                        </select>\n                    </div>\n\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="maxMark">Max Mark</label>\n                        <input type="text" class="form-control" id="maxMark" placeholder="Enter maximum mark" name="max">\n                    </div>\n\n                    <div class="form-group form-group-lg">\n                        <select class="form-control" id="assignmentSemester" name="semester">\n                            <option value="" selected>Choose semester</option>\n                            <option>1</option>\n                            <option>2</option>\n                        </select>\n                    </div>\n\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="assignmentWeight">Weight</label>\n                        <input type="text" class="form-control" id="assignmentWeight" placeholder="Enter weighting" name="weight">\n                    </div>\n\n                    <div class="form-group form-group-lg">\n                        <select class="form-control" id="exampleInputYear" name="year">\n                            <option value="" selected>What year is the assignment for?</option>\n\n                            <% for(var i=2013; i <= new Date().getFullYear(); i++) { %>\n\n                            <option value="<%= i %>"><%= i %> / <%= i+1 %></option>\n\n                            <% } %>\n\n                        </select>\n                    </div>\n\n                    <div class="form-group form-group-lg row">\n                        <label class="col-md-3 col-xs-2" for="datepicker">Due Date: </label>\n                        <div class="col-md-9 col-xs-10">\n                            <input type="text" class="form-control" id="datepicker" placeholder="Enter weighting" name="due">\n                        </div>\n                    </div>\n\n                    <button type="submit" class="btn btn-block btn-info">\n                        <span class="fa fa-check"></span> Create\n                    </button>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/CreateAssignmentView",["jquery","underscore","backbone","text!templates/CreateAssignmentTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.assignmentsCollection=e.assignmentsCollection,this.assignmentTypeCollection=e.assignmentTypeCollection,this.moduleCollection=e.moduleCollection,this.listenTo(this.assignmentTypeCollection,"add remove change",this.render),this.listenTo(this.moduleCollection,"add remove change",this.render),this.listenTo(this.assignmentsCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{modules:this.moduleCollection,assignmentTypes:this.assignmentTypeCollection});this.$el.html(e),this.$("#datepicker").datepicker({dateFormat:"dd M yy"}).datepicker("setDate",new Date)},events:{"submit .create-assignment-form":"createAssignment"},createAssignment:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(o){var u={success:t.bind(function(t){e(".warning-div").prepend(i.assignmentSuccess)},this),error:t.bind(function(){e(".warning-div").prepend(i.assignmentExists)},this)};this.assignmentsCollection.create(r,u)}else e(".warning-div").prepend(i.emptyFields)}});return o}),define("views/AdminChoiceView",["jquery","underscore","backbone","text!templates/AdminChoiceTemplate.html","views/CreateModuleView","views/CreateAssignmentView"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.moduleCollection=e.moduleCollection,this.assignmentsCollection=e.assignmentsCollection,this.assignmentTypeCollection=e.assignmentTypeCollection},render:function(){var e=t.template(r);this.$el.html(e)},events:{"click .assignment-form-button":"showAssignmentForm","click .module-form-button":"showModuleForm","click .course-form-button":"showCourseForm","click .institution-form-button":"showInstitutionForm","click .admin-form-button":"showAdminForm"},showAssignmentForm:function(e){this.render(),this.moduleCollection.fetch(),this.createAssignmentView=new s({assignmentsCollection:this.assignmentsCollection,moduleCollection:this.moduleCollection,assignmentTypeCollection:this.assignmentTypeCollection}),this.createAssignmentView.render(),this.$el.append(this.createAssignmentView.$el)},showModuleForm:function(e){this.render(),this.createModuleView=new i({collection:this.moduleCollection}),this.createModuleView.render(),this.$el.append(this.createModuleView.$el)},showCourseForm:function(e){console.log("courses"),this.render()},showInstitutionForm:function(e){console.log("unis"),this.render()},showAdminForm:function(e){console.log("admins"),this.render()}});return o}),define("views/AdminPage",["jquery","underscore","backbone","views/ProfileNavView","views/FooterView","views/AdminChoiceView","models/UserModel"],function(e,t,n,r,i,s,o){var u=n.View.extend({initialize:function(e){this.router=e.router,this.footerView=new i,this.router.on("route:admin",function(t){this.navView=new r,this.moduleCollection=e.moduleCollection,this.assignmentsCollection=e.assignmentsCollection,this.assignmentTypeCollection=e.assignmentTypeCollection,this.adminChoiceView=new s({moduleCollection:this.moduleCollection,assignmentsCollection:this.assignmentsCollection,assignmentTypeCollection:this.assignmentTypeCollection}),this.assignmentTypeCollection.fetch(),this.moduleCollection.fetch(),this.adminChoiceView.render()},this)},render:function(){this.$el.children().detach(),this.navView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.adminChoiceView.$el),this.$el.append(this.footerView.$el)}});return u}),define("text!templates/EditGradeTemplate.html",[],function(){return'<div class="container-fluid">\n    <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-6">\n            <div class="container-fluid centre form-view">\n\n                <h1 class="page-title">\n                    <button type="button" class="btn btn-default cancel">\n                        <span class="fa fa-arrow-left"></span>\n                    </button>\n                    Edit your grade:\n                </h1>\n\n                <h2>\n                    <%= model.get(\'module_code\') %> - <%= model.get(\'assignment_name\') %>\n                    <small>\n                        (<%= model.get(\'max_mark\') %>)\n                    </small>\n                </h2>\n\n                <div class="warning-div">&nbsp</div>\n\n                <form role="form" class="edit-grade-form">\n                    <div class="form-group form-group-lg">\n                        <label class="sr-only" for="exampleInputScore2">Score</label>\n                        <input type="text" value="<%= model.get(\'score\') %>" class="form-control" id="exampleInputScore2" placeholder="Enter score" name="score">\n                    </div>\n                    <input type="hidden" name="grade_id" value=<%= model.id %>>\n                    <button type="submit" class="btn btn-info btn-wide">\n                        <span class="fa fa-check"></span> Change\n                    </button>\n                    <button type="button" class="btn btn-danger btn-wide delete" value="<%= model.get(\'id\') %>">\n                        <span class="fa fa-times"></span> Delete\n                    </button>\n                    <br>\n                </form>\n\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/EditGradeView",["jquery","underscore","backbone","text!templates/EditGradeTemplate.html","libs/Labels","libs/Utils"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(e){this.router=e.router,this.gradesCollection=e.gradesCollection,this.gradeModel=this.gradesCollection.get(e.grade_id),this.listenTo(this.gradesCollection,"add remove change",this.render)},render:function(){var e=t.template(r,{model:this.gradeModel});this.$el.html(e)},events:{"submit .edit-grade-form":"editGrade","click .cancel":"cancel","click .delete":"delete"},editGrade:function(n){n.preventDefault(),e(".warning-div").empty().append("&nbsp");var r=s.formToObject(e(n.currentTarget)),o=s.goodForm(r);if(isNaN(r.score))e(".warning-div").prepend(i.scoreNotNumber);else if(r.score<0)e(".warning-div").prepend(i.scoreNotPositive);else if(o){var u={data:{user_id:s.getCookie("user_id"),score:r.score},processData:!0,success:t.bind(function(t){e(".warning-div").empty().append("&nbsp");var n=s.getCookie("username"),r="#/"+n;this.router.navigate(r,{trigger:!0})},this),error:t.bind(function(t){e(".warning-div").prepend(i.saveFailed)},this)};this.gradeModel.save(r,u)}else e(".warning-div").prepend(i.emptyFields)},cancel:function(t){e(".warning-div").empty().append("&nbsp");var n=s.getCookie("username"),r="#/"+n;this.router.navigate(r,{trigger:!0})},"delete":function(n){var r=n.currentTarget.attributes.value.value;this.gradeModel.destroy({data:{grade_id:r,user_id:s.getCookie("user_id")},processData:!0,success:t.bind(function(){e(".warning-div").empty().append("&nbsp");var t=s.getCookie("username"),n="#/"+t;this.router.navigate(n,{trigger:!0})},this)})}});return o}),define("views/EditGradePage",["jquery","underscore","backbone","views/ProfileNavView","views/EditGradeView","views/FooterView","models/UserModel","libs/Utils"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({initialize:function(e){this.router=e.router,this.footerView=new s,this.router.on("route:editGrade",function(t,n,s){var o=u.getCookie("user_id");this.navView=new r,this.gradesCollection=e.gradesCollection,this.gradesCollection.fetch({data:""+s+"x"+o}),this.gradeModel=this.gradesCollection.get(n),this.editGradeView=new i({gradesCollection:this.gradesCollection,gradeModel:this.gradeModel,grade_id:n,router:this.router}),this.render()},this)},render:function(){this.$el.children().detach(),this.navView.render(),this.editGradeView.render(),this.footerView.render(),this.$el.append(this.navView.$el),this.$el.append(this.editGradeView.$el),this.$el.append(this.footerView.$el)}});return a}),define("models/AssignmentTypeModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/assignmentType"})}),define("collections/AssignmentTypeCollection",["underscore","backbone","models/AssignmentTypeModel"],function(e,t,n){return t.Collection.extend({initialize:function(e,t){},url:function(){return"/gradient/v1/assignmentType"},model:n})}),define("models/YearAverageModel",["underscore","backbone"],function(e,t){return t.Model.extend({urlRoot:"/gradient/v1/yearAverages"})}),define("collections/YearAverageCollection",["underscore","backbone","models/YearAverageModel"],function(e,t,n){return t.Collection.extend({url:function(){return"/gradient/v1/yearAverages"},model:n})}),define("router",["jquery","underscore","backbone","bootstrap","views/HomePage","views/ProfilePage","collections/UserCollection","views/SignUpPage","collections/LoginCollection","models/UserModel","views/AddModulePage","collections/ModuleCollection","collections/UserModulesCollection","collections/InstitutionsCollection","collections/CourseCollection","collections/GradesCollection","views/AddGradePage","collections/AssignmentsCollection","views/AdminPage","views/EditGradePage","collections/AssignmentTypeCollection","collections/YearAverageCollection","libs/Utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){var x=n.Router.extend({initialize:function(){this.bind("route",this.trackPageView)},routes:{"":"home",signUp:"signUp",":id":"profile",":id/addModule":"addModule",":id/addGrade/:od/:ed":"addGrade",":id/admin":"admin",":id/editGrade/:ed/:od":"editGrade"},trackPageView:function(){var e=n.history.getFragment();!/^\//.test(e)&&e!=""&&(e="/"+e),ga("send","pageview",{page:"/"+e})}}),T=function(){function W(n){e('.page > [data-name="'+n+'"]').length||(U[n].render(),e(".page").append(U[n].$el.attr("data-name",n))),t.each(U,function(e,t){e.$el.toggle(t===n)})}var r=new x,T=new o,N=new a,C=new c,k=new h,L=new p,A=new d,O=new v,M=new g,D=new w,P=new E,H=new i({router:r,collection:N}),B=new s({router:r,userModulesCollection:k,gradesCollection:O,yearAverageCollection:P}),j=new u({router:r,userCollection:T,institutionsCollection:L,courseCollection:A}),F=new l({router:r,moduleCollection:C,userModulesCollection:k}),I=new m({gradesCollection:O,router:r,assignmentsCollection:M}),q=new y({router:r,moduleCollection:C,assignmentsCollection:M,courseCollection:A,assignmentTypeCollection:D}),R=new b({router:r,gradesCollection:O}),U={home:H,profile:B,signUp:j,addModule:F,addGrade:I,admin:q,editGrade:R},z=["profile","addModule","addGrade","admin","editGrade"];r.on("route",function(e,n){var i=S.getCookie("username"),s=S.getCookie("user_id");s&&t.contains(z,e)&&n[0]!=i?r.navigate("#/"+i,{trigger:!0}):!s||e!="home"&&e!="signUp"?s&&e=="admin"?(this.userModel=new f({id:s}),this.userModel.fetch({success:t.bind(function(){this.userModel.get("admin")?W(e):r.navigate("#/",{trigger:!0})},this),error:function(){r.navigate("#/",{trigger:!0})}})):!s&&t.contains(z,e)?r.navigate("#/",{trigger:!0}):W(e):r.navigate("#/"+i,{trigger:!0})}),n.history.start({pushState:!1})};return{initialize:T}}),define("app",["underscore","jquery","backbone","router","libs/Utils"],function(e,t,n,r,i){var s=function(){r.initialize()};return{initialize:s}}),require.config({paths:{jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min","./assets/jquery-2.1.3.min"],jqueryUI:["//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min","./assets/jquery-ui.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min","./assets/underscore-min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","./assets/backbone-min"],bootstrap:["//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min","./assets/bootstrap.min"],text:"./assets/text",templates:"../templates"},shim:{backbone:{deps:["underscore"]},bootstrap:{deps:["jquery"]},jqueryUI:{deps:["jquery"],exports:["jquery"]},underscore:{exports:"_"}}}),require(["jquery","jqueryUI"],function(e){}),require(["underscore"],function(e){}),require(["backbone"],function(e){}),require(["bootstrap"],function(e){}),require(["app"],function(e){e.initialize()}),define("main",function(){});